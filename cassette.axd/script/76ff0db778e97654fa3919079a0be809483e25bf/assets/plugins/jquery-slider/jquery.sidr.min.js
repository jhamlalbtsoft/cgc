/*! Sidr - v1.1.1 - 2013-03-14
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
(function(n){var i=!1,u=!1,t={isUrl:function(n){var t=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(n)?!0:!1},loadContent:function(n,t){n.html(t)},addPrefix:function(n){var i=n.attr("id"),t=n.attr("class");"string"==typeof i&&""!==i&&n.attr("id",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof t&&""!==t&&"sidr-inner"!==t&&n.attr("class",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),n.removeAttr("style")},execute:function(t,f,e){"function"==typeof f?(e=f,f="sidr"):f||(f="sidr");var s,h,c,o=n("#"+f),l=n(o.data("body")),a=n("html"),v=o.outerWidth(!0),y=o.data("speed"),p=o.data("side");if("open"!==t&&("toogle"!==t||o.is(":visible"))){if(!o.is(":visible")||i)return;i=!0,"left"===p?(s={left:0},h={left:"-"+v+"px"}):(s={right:0},h={right:"-"+v+"px"}),c=a.scrollTop(),a.removeAttr("style").scrollTop(c),l.animate(s,y),o.animate(h,y,function(){o.removeAttr("style"),l.removeAttr("style"),n("html").removeAttr("style"),i=!1,u=!1,"function"==typeof e&&e(f)})}else{if(o.is(":visible")||i)return;if(u!==!1)return r.close(u,function(){r.open(f)}),void 0;i=!0,"left"===p?(s={left:v+"px"},h={left:"0px"}):(s={right:v+"px"},h={right:"0px"}),c=a.scrollTop(),a.css("overflow-x","hidden").scrollTop(c),l.css({width:l.width(),position:"absolute"}).animate(s,y),o.css("display","block").animate(h,y,function(){i=!1,u=f,"function"==typeof e&&e(f)})}}},r={open:function(n,i){t.execute("open",n,i)},close:function(n,i){t.execute("close",n,i)},toogle:function(n,i){t.execute("toogle",n,i)}};n.sidr=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?(n.error("Method "+t+" does not exist on jQuery.sidr"),void 0):r.toogle.apply(this,arguments)},n.fn.sidr=function(i){var u=n.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},i),e=u.name,f=n("#"+e),h,o,c,s;return(0===f.length&&(f=n("<div />").attr("id",e).appendTo(n("body"))),f.addClass("sidr").addClass(u.side).data({speed:u.speed,side:u.side,body:u.body}),"function"==typeof u.source)?(h=u.source(e),t.loadContent(f,h)):"string"==typeof u.source&&t.isUrl(u.source)?n.get(u.source,function(n){t.loadContent(f,n)}):"string"==typeof u.source?(o="",c=u.source.split(","),(n.each(c,function(t,i){o+='<div class="sidr-inner">'+n(i).html()+"<\/div>"}),u.renaming)&&(s=n("<div />").html(o),s.find("*").each(function(i,r){var u=n(r);t.addPrefix(u)}),o=s.html()),t.loadContent(f,o)):null!==u.source&&n.error("Invalid Sidr Source"),this.each(function(){var t=n(this),i=t.data("sidr");i||(t.data("sidr",e),t.click(function(n){n.preventDefault(),r.toogle(e)}))})}})(jQuery)